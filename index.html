<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bandera AR - 18 Pa√≠ses</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .ar-container {
            width: 100%;
            height: 70vh;
            max-width: 800px;
            margin: 0 auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            background: #000;
            position: relative;
        }

        .country-display {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
        }

        .country-display.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .country-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: #4FC3F7;
        }

        .country-status {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .host-badge {
            background: #FF9800;
            color: black;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-left: 8px;
        }

        .countries-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 30px;
            padding: 20px;
        }

        .country-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s ease, background 0.3s ease;
            cursor: pointer;
        }

        .country-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
        }

        .country-card.host {
            border: 2px solid #FF9800;
        }

        .flag-icon {
            width: 60px;
            height: 40px;
            margin: 0 auto 10px;
            border-radius: 5px;
            border: 2px solid white;
        }

        .usa-flag { background: linear-gradient(90deg, #B31942 33%, white 33%, white 66%, #0A3161 66%); }
        .canada-flag { background: linear-gradient(90deg, #FF0000 25%, white 25%, white 75%, #FF0000 75%); }
        .mexico-flag { background: linear-gradient(90deg, #006847 33%, white 33%, white 66%, #CE1126 66%); }
        .japan-flag { background: radial-gradient(circle, #BC002D 30%, white 30%); }
        .newzealand-flag { background: linear-gradient(90deg, #00247D 33%, white 33%); }
        .iran-flag { background: linear-gradient(90deg, #239F40 33%, white 33%, white 66%, #DA0000 66%); }
        .argentina-flag { background: linear-gradient(180deg, #74ACDF 33%, white 33%, white 66%, #74ACDF 66%); }
        .uzbekistan-flag { background: linear-gradient(180deg, #1EB53A 33%, white 33%, white 66%, #0099B5 66%); }
        .southkorea-flag { background: linear-gradient(90deg, #CD2E3A 50%, #0047A0 50%); }
        .jordan-flag { background: linear-gradient(180deg, #000000 33%, white 33%, white 66%, #007A3D 66%); }
        .australia-flag { background: linear-gradient(90deg, #00008B 33%, white 33%); }
        .brazil-flag { background: radial-gradient(circle, #009C3B 60%, #FFDF00 60%); }
        .ecuador-flag { background: linear-gradient(180deg, #FFD100 33%, #004B87 33%, #004B87 66%, #ED1C24 66%); }
        .uruguay-flag { background: linear-gradient(180deg, #0038A8 33%, white 33%, white 66%, #0038A8 66%); }
        .colombia-flag { background: linear-gradient(180deg, #FCD116 50%, #003893 50%, #003893 75%, #CE1126 75%); }
        .paraguay-flag { background: linear-gradient(180deg, #0038A8 33%, white 33%, white 66%, #D52B1E 66%); }
        .morocco-flag { background: #CE1126; }
        .tunisia-flag { background: #E70013; }

        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 100;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .ar-container { height: 50vh; }
            .countries-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåç Experiencia AR - 18 Pa√≠ses</h1>
            <p class="subtitle">Escanea cualquier bandera para ver su modelo 3D animado</p>
        </header>

        <div class="instructions">
            <p>üì± Enfoca la c√°mara hacia cualquier bandera de los pa√≠ses listados</p>
            <p>‚ú® El modelo 3D aparecer√° autom√°ticamente con animaci√≥n de rotaci√≥n</p>
        </div>

        <div class="ar-container">
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Cargando experiencia AR...</p>
            </div>

            <div class="country-display" id="countryDisplay">
                <div class="country-name" id="currentCountry">Pa√≠s Detectado</div>
                <div class="country-status" id="countryStatus">Escaneando...</div>
            </div>

            <a-scene 
                mindar-image="imageTargetSrc: ./assets/targets/targets.mind; autoStart: true; maxTrack: 3;"
                color-space="sRGB" 
                renderer="colorManagement: true; physicallyCorrectLights: true;"
                vr-mode-ui="enabled: false"
                device-orientation-permission-ui="enabled: false"
                embedded>

                <a-assets>
                    <!-- Modelos de pa√≠ses -->
                    <a-asset-item id="usa-model" src="./assets/models/usa/scene.gltf"></a-asset-item>
                    <a-asset-item id="canada-model" src="./assets/models/canada/scene.gltf"></a-asset-item>
                    <a-asset-item id="mexico-model" src="./assets/models/mexico/scene.gltf"></a-asset-item>
                    <a-asset-item id="japan-model" src="./assets/models/japan/scene.gltf"></a-asset-item>
                    <a-asset-item id="newzealand-model" src="./assets/models/newzealand/scene.gltf"></a-asset-item>
                    <a-asset-item id="iran-model" src="./assets/models/iran/scene.gltf"></a-asset-item>
                    <a-asset-item id="argentina-model" src="./assets/models/argentina/scene.gltf"></a-asset-item>
                    <a-asset-item id="uzbekistan-model" src="./assets/models/uzbekistan/scene.gltf"></a-asset-item>
                    <a-asset-item id="southkorea-model" src="./assets/models/southkorea/scene.gltf"></a-asset-item>
                    <a-asset-item id="jordan-model" src="./assets/models/jordan/scene.gltf"></a-asset-item>
                    <a-asset-item id="australia-model" src="./assets/models/australia/scene.gltf"></a-asset-item>
                    <a-asset-item id="brazil-model" src="./assets/models/bandera.gltf"></a-asset-item>
                    <a-asset-item id="ecuador-model" src="./assets/models/ecuador/scene.gltf"></a-asset-item>
                    <a-asset-item id="uruguay-model" src="./assets/models/uruguay/scene.gltf"></a-asset-item>
                    <a-asset-item id="colombia-model" src="./assets/models/colombia/scene.gltf"></a-asset-item>
                    <a-asset-item id="paraguay-model" src="./assets/models/paraguay/scene.gltf"></a-asset-item>
                    <a-asset-item id="morocco-model" src="./assets/models/morocco/scene.gltf"></a-asset-item>
                    <a-asset-item id="tunisia-model" src="./assets/models/tunisia/scene.gltf"></a-asset-item>
                </a-assets>

                <a-camera position="0 0 0" look-controls="enabled: false" active="true"></a-camera>

                <!-- Estados Unidos -->
                <a-entity mindar-image-target="targetIndex: 0">
                    <a-entity class="model-container" position="1.5 0.5 0" scale="0.8 0.8 0.8"
                             animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
                        <a-gltf-model src="#usa-model" rotation="0 0 0"></a-gltf-model>
                    </a-entity>
                </a-entity>

                <!-- Canad√° -->
                <a-entity mindar-image-target="targetIndex: 1">
                    <a-entity class="model-container" position="1.5 0.5 0" scale="0.7 0.7 0.7"
                             animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
                        <a-gltf-model src="#canada-model" rotation="0 0 0"></a-gltf-model>
                    </a-entity>
                </a-entity>

                <!-- M√©xico -->
                <a-entity mindar-image-target="targetIndex: 2">
                    <a-entity class="model-container" position="1.5 0.5 0" scale="0.8 0.8 0.8"
                             animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
                        <a-gltf-model src="#mexico-model" rotation="0 0 0"></a-gltf-model>
                    </a-entity>
                </a-entity>
                <!-- brazil -->
                <a-entity mindar-image-target="targetIndex: 2">
                    <a-entity class="model-container" position="1.5 0.5 0" scale="0.8 0.8 0.8"
                             animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
                        <a-gltf-model src="#brazil-model" rotation="0 0 0"></a-gltf-model>
                    </a-entity>
                </a-entity>


                <!-- Continuar con los dem√°s pa√≠ses... -->
                <!-- Jap√≥n targetIndex: 3 -->
                <!-- Nueva Zelanda targetIndex: 4 -->
                <!-- Ir√°n targetIndex: 5 -->
                <!-- ... hasta T√∫nez targetIndex: 17 -->

            </a-scene>
        </div>

        <div class="countries-grid">
            <!-- Tarjetas de pa√≠ses para referencia -->
            <div class="country-card host" data-country="usa">
                <div class="flag-icon usa-flag"></div>
                <div>Estados Unidos <span class="host-badge">Anfitri√≥n</span></div>
            </div>
            <div class="country-card host" data-country="canada">
                <div class="flag-icon canada-flag"></div>
                <div>Canad√° <span class="host-badge">Anfitri√≥n</span></div>
            </div>
            <div class="country-card host" data-country="mexico">
                <div class="flag-icon mexico-flag"></div>
                <div>M√©xico <span class="host-badge">Anfitri√≥n</span></div>
            </div>
            <div class="country-card" data-country="japan">
                <div class="flag-icon japan-flag"></div>
                <div>Jap√≥n</div>
            </div>
            <div class="country-card" data-country="newzealand">
                <div class="flag-icon newzealand-flag"></div>
                <div>Nueva Zelanda</div>
            </div>
            <div class="country-card" data-country="iran">
                <div class="flag-icon iran-flag"></div>
                <div>Ir√°n</div>
            </div>
            <div class="country-card" data-country="argentina">
                <div class="flag-icon argentina-flag"></div>
                <div>Argentina</div>
            </div>
            <div class="country-card" data-country="uzbekistan">
                <div class="flag-icon uzbekistan-flag"></div>
                <div>Uzbekist√°n</div>
            </div>
            <div class="country-card" data-country="southkorea">
                <div class="flag-icon southkorea-flag"></div>
                <div>Corea del Sur</div>
            </div>
            <div class="country-card" data-country="jordan">
                <div class="flag-icon jordan-flag"></div>
                <div>Jordania</div>
            </div>
            <div class="country-card" data-country="australia">
                <div class="flag-icon australia-flag"></div>
                <div>Australia</div>
            </div>
            <div class="country-card" data-country="brazil">
                <div class="flag-icon brazil-flag"></div>
                <div>Brasil</div>
            </div>
            <div class="country-card" data-country="ecuador">
                <div class="flag-icon ecuador-flag"></div>
                <div>Ecuador</div>
            </div>
            <div class="country-card" data-country="uruguay">
                <div class="flag-icon uruguay-flag"></div>
                <div>Uruguay</div>
            </div>
            <div class="country-card" data-country="colombia">
                <div class="flag-icon colombia-flag"></div>
                <div>Colombia</div>
            </div>
            <div class="country-card" data-country="paraguay">
                <div class="flag-icon paraguay-flag"></div>
                <div>Paraguay</div>
            </div>
            <div class="country-card" data-country="morocco">
                <div class="flag-icon morocco-flag"></div>
                <div>Marruecos</div>
            </div>
            <div class="country-card" data-country="tunisia">
                <div class="flag-icon tunisia-flag"></div>
                <div>T√∫nez</div>
            </div>
        </div>

        <footer>
            <p>üåê Experiencia de Realidad Aumentada - Escanea cualquier bandera para descubrir modelos 3D</p>
        </footer>
    </div>

    <script>
        // Ocultar loading cuando la escena est√© lista
        document.querySelector('a-scene').addEventListener('loaded', function() {
            document.getElementById('loading').style.display = 'none';
        });

        // Nombres de pa√≠ses por √≠ndice de target
        const countryNames = {
            0: "Estados Unidos üá∫üá∏",
            1: "Canad√° üá®üá¶", 
            2: "M√©xico üá≤üáΩ",
            3: "Jap√≥n üáØüáµ",
            4: "Nueva Zelanda üá≥üáø",
            5: "Ir√°n üáÆüá∑",
            6: "Argentina üá¶üá∑",
            7: "Uzbekist√°n üá∫üáø",
            8: "Corea del Sur üá∞üá∑",
            9: "Jordania üáØüá¥",
            10: "Australia üá¶üá∫",
            11: "Brasil üáßüá∑",
            12: "Ecuador üá™üá®",
            13: "Uruguay üá∫üáæ",
            14: "Colombia üá®üá¥",
            15: "Paraguay üáµüáæ",
            16: "Marruecos üá≤üá¶",
            17: "T√∫nez üáπüá≥"
        };

        // Detectar cuando se encuentra un target
        document.querySelector('a-scene').addEventListener('targetFound', event => {
            const targetIndex = event.target.getAttribute('mindar-image-target').targetIndex;
            const countryName = countryNames[targetIndex];
            
            document.getElementById('currentCountry').textContent = countryName;
            document.getElementById('countryStatus').textContent = "‚úÖ Bandera detectada";
            document.getElementById('countryDisplay').classList.add('active');
        });

        // Detectar cuando se pierde un target
        document.querySelector('a-scene').addEventListener('targetLost', event => {
            document.getElementById('countryDisplay').classList.remove('active');
        });
    </script>
</body>
</html>